/*
    Retype Statement Test #6

    This tests if fields can properly be accessed
    whhen using retype statements in control statements.

    Output:
        a.z = true, a.x = 4
        a.y = 3.14, a.x = 3
        a.z = true, a.x = 4
        a.y = 3.14, a.x = 3
        a.z = true, a.x = 4
        a.y = 3.14, a.x = 3
        a.z = true, a.x = 4
        a.y = 3.14, a.x = 3
        a.z = true, a.x = 4
        a.y = 3.14, a.x = 3
*/

class A {
    public x:Int 
}

class B inherits A {
    public y:Real
}

class C inherits A {
    public z:Bool
}

def a:A = uninit
for(def i:Int in 1..10) {
    if(i%2 == 0) { 
        retype a = new B(x=3,y=3.14) 
        cout << 'a.y = ' << a.y
    } else {
        retype a = new C(x=4,z=True)
        cout << 'a.z = ' << a.z
    }

    cout << ', a.x = ' << a.x << endl 
}
